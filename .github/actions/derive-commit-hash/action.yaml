name: "Derive git hash for branch action"
description: "Derives the short version of the commit hash for branch"
inputs:
    sha:
        description: "The sha from which to derive short version of commit hash"
        required: true
    pull_request:
        description: "Request generated by a pull request"
        required: false
outputs:
    commit_hash:
        description: "The derived short version of the git commit hash "
        value: ${{ steps.derive-commit-hash.outputs.commit_hash }}

runs:
  using: "composite"
  steps:
    - name: "Derive git hash"
      id: "derive-short-hash"
      shell: bash
      run: |
        export SHA=${{ inputs.sha }}
        export PULL_REQUEST=${{ inputs.pull_request }}
        /bin/bash ./uec-dos-management/scripts/workflow/derive-hash-from-sha.sh
      # run: |
      #   commit_hash=$(git rev-parse --short "${{ inputs.sha }}")
      #   echo "commit hash: [$commit_hash]"
      #   echo "commit_hash=$commit_hash" >> $GITHUB_OUTPUT
